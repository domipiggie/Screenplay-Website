<!DOCTYPE html>
<html lang="hu">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
    <link rel="icon" href="https://cdn.logojoy.com/wp-content/uploads/2018/05/29153827/81.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
        integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <title>Search</title>
    <link rel="stylesheet" href="../static/css/style.css">

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
        crossorigin="anonymous"></script>
</head>

<body>
    <nav>
        <div class="nav-center">
            <div class="nav-header">
                <h2><a href="/">Script Finder</a></h2>
            </div>
            <ul class="links">
                <li>
                    <a class="btn btn-dark px-3" href="https://github.com/domipiggie/Screenplay-Website"
                        role="button"><i class="fab fa-github"></i></a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container-fluid">
        <div class="d-flex flex-row justify-content-center align-items-center p-2">
            <input type="text" class="form-control search" id="search" placeholder="Kezdjen el gépelni...">
            <button type="submit" onclick="search()" class="searchButton btn-primary" id="searchButton">Keresés</button>
        </div>

        <div class="row">
            <div class="col-sm-12 col-md-2 col-lg-2">
                <h5 style="text-align: center;">Szűrő<button class="navbar-toggler toggler-example" type="button"
                        data-toggle="collapse" data-target="#navbarSupportedContent1"
                        aria-controls="navbarSupportedContent1" aria-expanded="false"
                        aria-label="Toggle navigation"><span class="dark-blue-text"><i
                                class="fas fa-bars fa-1x"></i></span></button></h5>


                <div class="collapse show navbar-collapse" id="navbarSupportedContent1">
                    <div class="list-group list-group-light">
                        <input class="form-control" placeholder="Műfaj" readonly>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-action" />
                            <label class="form-check-label" for="genre-action">Akció</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-biography" />
                            <label class="form-check-label" for="genre-biography">Biográfia</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-drama" />
                            <label class="form-check-label" for="genre-drama">Dráma</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-erotic" />
                            <label class="form-check-label" for="genre-erotic">Erotikus</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-fantasy" />
                            <label class="form-check-label" for="genre-fantasy">Fantasy</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-horror" />
                            <label class="form-check-label" for="genre-horror">Horror</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-unknown" />
                            <label class="form-check-label" for="genre-unknown">Ismeretlen</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-adventure" />
                            <label class="form-check-label" for="genre-adventure">Kaland</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-comedy" />
                            <label class="form-check-label" for="genre-comedy">Komédia</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-musical" />
                            <label class="form-check-label" for="genre-musical">Musical</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-noir" />
                            <label class="form-check-label" for="genre-noir">Noir</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-scifi" />
                            <label class="form-check-label" for="genre-scifi">Sci-Fi</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-thriller" />
                            <label class="form-check-label" for="genre-thriller">Thriller</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-comedy2" />
                            <label class="form-check-label" for="genre-comedy2">Vígjáték</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="genre-western" />
                            <label class="form-check-label" for="genre-western">Western</label>
                        </li>
                    </div>

                    <div class="list-group list-group-light">
                        <input class="form-control" placeholder="Típus" readonly>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="type-draft" />
                            <label class="form-check-label" for="type-draft">Vázlat</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="type-final" />
                            <label class="form-check-label" for="type-final">Végleges</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="type-shooting" />
                            <label class="form-check-label" for="type-shooting">Forgatási</label>
                        </li>
                        <li class="list-group-item">
                            <input class="form-check-input" type="checkbox" id="type-unspecified" />
                            <label class="form-check-label" for="type-unspecified">Nem meghatározott</label>
                        </li>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-8 col-lg-8">
                <div class="row">
                    {% if results %}
                    {% for result in results %}
                    <div class="col-sm-12 col-md-6 mb-3 d-flex align-items-stretch">
                        <div class="card" style="width:100%">
                            <img class="card-img-top" src="../static/pics/{{ result[6] }}" alt="Card image cap">
                            <div class="card-body">
                                <h5 class="card-title">{{ result[1] }}</h5>
                                <p class="card-text">Írta: {{ result[2] }}</p>
                            </div>
                            <div class="card-footer text-muted">
                                <a href="s?screen={{ result[5] }}" target="_blank"
                                    class="btn btn-primary">Megtekintés</a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    {% endif %}
                </div>
            </div>
            <div class="col-sm-12 col-md-2 col-lg-2"></div>
        </div>

        <script>
            let actionCheckbox = document.getElementById("genre-action")
            let biographyCheckbox = document.getElementById("genre-biography")
            let dramaCheckbox = document.getElementById("genre-drama")
            let eroticCheckbox = document.getElementById("genre-erotic")
            let fantasyCheckbox = document.getElementById("genre-fantasy")
            let horrorCheckbox = document.getElementById("genre-horror")
            let unknownCheckbox = document.getElementById("genre-unknown")
            let adventureCheckbox = document.getElementById("genre-adventure")
            let comedyCheckbox = document.getElementById("genre-comedy")
            let musicalCheckbox = document.getElementById("genre-musical")
            let noirCheckbox = document.getElementById("genre-noir")
            let scifiCheckbox = document.getElementById("genre-scifi")
            let thrillerCheckbox = document.getElementById("genre-thriller")
            let comedy2Checkbox = document.getElementById("genre-comedy2")
            let westernCheckbox = document.getElementById("genre-western")
            let draftCheckbox = document.getElementById("type-draft")
            let finalCheckbox = document.getElementById("type-final")
            let shootingCheckbox = document.getElementById("type-shooting")
            let unspecifiedCheckbox = document.getElementById("type-unspecified")

            function search() {
                let filters = ""
                let type = ""

                if (actionCheckbox.checked) { filters += ",akció" }
                if (biographyCheckbox.checked) { filters += ",biográfia" }
                if (dramaCheckbox.checked) { filters += ",dráma" }
                if (eroticCheckbox.checked) { filters += ",erotikus" }
                if (fantasyCheckbox.checked) { filters += ",fantasy" }
                if (horrorCheckbox.checked) { filters += ",horror" }
                if (unknownCheckbox.checked) { filters += ",ismeretlen" }
                if (adventureCheckbox.checked) { filters += ",kaland" }
                if (comedyCheckbox.checked) { filters += ",komédia" }
                if (musicalCheckbox.checked) { filters += ",musical" }
                if (noirCheckbox.checked) { filters += ",noir" }
                if (scifiCheckbox.checked) { filters += ",sci-fi" }
                if (thrillerCheckbox.checked) { filters += ",thriller" }
                if (comedy2Checkbox.checked) { filters += ",vígjáték" }
                if (westernCheckbox.checked) { filters += ",western" }

                if (filters.startsWith(",")) { filters = filters.slice(1) }


                if (draftCheckbox.checked) { type += ",draft_script" }
                if (finalCheckbox.checked) { type += ",final_script" }
                if (shootingCheckbox.checked) { type += ",shooting_script" }
                if (unspecifiedCheckbox.checked) { type += ",unspecified_script" }

                if (type.startsWith(",")) { type = type.slice(1) }


                window.location.href = window.location.href.split("?")[0] + "?q=" + document.getElementById("search").value + "&f=" + filters + "&t" + type
            }
        </script>
    </div>
</body>

</html>